<!-- repo: team-michael/notifly-android-sdk -->
<!-- ref: main -->
<!-- commit: e04ac2b1c6b1d507d69dce60b93fb9f7a4b387d6 -->
<!-- generated_at: 2025-11-14T02:08:30Z -->
# Platform: Android

## notifly/src/main/java/tech/notifly
- [Notifly](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/Notifly.kt): Singleton SDK entrypoint that initializes the SDK (stores project creds, registers ApplicationService and HttpClient, starts lifecycle, in-app session) and exposes APIs: setUserId/properties, trackEvent, notification/in-app listeners, logging.
- [Notifly](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/Notifly.kt): Singleton SDK façade managing initialization, project metadata storage, service registration (ApplicationService, HttpClient), lifecycle/session/in-app setup, and exposing public APIs: initialize, setUserId/properties/phone/email/timezone, trackEvent, notification/in-app listeners, setLogLevel, getNotiflyUserId.

## notifly/src/main/java/tech/notifly/application
- [Iapplicationlifecyclehandler](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/IApplicationLifecycleHandler.kt): Defines IApplicationLifecycleHandler (onFocus(first: Boolean), onUnfocused()) for receiving app foreground/background events and provides BaseApplicationLifecycleHandler no-op default implementation, where first flags initial foreground after cold start.
- [Iapplicationservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/IApplicationService.kt): Interface providing app-level Context, current Activity and foreground status, mutable ApplicationEntryAction, and add/remove IApplicationLifecycleHandler lifecycle hooks; depends on android.app.
- [Applicationservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/ApplicationService.kt): ApplicationService implements IApplicationService, ActivityLifecycleCallbacks and OnGlobalLayoutListener to track current Activity and foreground state, register callbacks (start()), handle orientation, and emit lifecycle events via EventProducer (add/removeApplicationLifecycleHandler).
- [Applicationentryaction](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/ApplicationEntryAction.kt): Defines ApplicationEntryAction enum (NOTIFICATION_CLICK, APP_OPEN, APP_CLOSE) representing app entry source with boolean helpers isNotificationClick/isAppOpen/isAppClose for branching/analytics.
- [Iapplicationlifecyclehandler](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/IApplicationLifecycleHandler.kt): Defines IApplicationLifecycleHandler (onFocus(first:Boolean), onUnfocused()) for app foreground/background events; BaseApplicationLifecycleHandler provides no-op default implementations.
- [Iapplicationservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/IApplicationService.kt): Interface exposing application Context, current Activity and foreground state, mutable ApplicationEntryAction (e.g.
- [Applicationservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/ApplicationService.kt): Implements ActivityLifecycleCallbacks to manage current Activity, foreground/background state and entryState; register via start(context), exposes add/removeApplicationLifecycleHandler, fires onFocus/onUnfocused events.
- [Applicationentryaction](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/ApplicationEntryAction.kt): Defines ApplicationEntryAction enum (NOTIFICATION_CLICK, APP_OPEN, APP_CLOSE) with boolean accessors isNotificationClick/isAppOpen/isAppClose to distinguish entry sources for routing notification and foreground flows.

## notifly/src/main/java/tech/notifly/command
- [Commanddispatcher](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/CommandDispatcher.kt): Singleton CommandDispatcher queues or executes CommandBase instances based on NotiflySdkState (via NotiflySdkStateManager), exposes dispatch(command) and lifecycle onStateChanged, handles SET_USER_ID refresh/stop semantics and logs.
- [Commanddispatcher](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/CommandDispatcher.kt): CommandDispatcher queues or executes CommandBase instances based on NotiflySdkState, implements ISdkLifecycleListener, exposes dispatch(command), may set state to REFRESHING for SET_USER_ID and drains the priority queue on READY.

## notifly/src/main/java/tech/notifly/command/models
- [Payloads](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/models/Payloads.kt): Defines PayloadBase (requires Android Context) and three immutable payload data classes—SetUserIdPayload, SetUserPropertiesPayload, TrackEventPayload—carrying user/event parameters, segmentation keys, and an internal-event flag for command handling.
- [Commands](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/models/Commands.kt): Defines a time-ordered CommandType and CommandBase with SetUserId/SetUserProperties/TrackEvent commands whose execute() runs async (IO), mutating NotiflyStorage/UserUtil, InAppMessageManager, SDK state, and logging events.
- [Payloads](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/models/Payloads.kt): Defines PayloadBase and data classes (SetUserIdPayload, SetUserPropertiesPayload, TrackEventPayload) that encapsulate Android Context and payload data (userId, params, eventName/eventParams, segmentation keys, isInternalEvent) for command handling.
- [Commands](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/models/Commands.kt): Defines CommandBase and CommandType plus concrete commands (SetUserIdCommand, SetUserPropertiesCommand, TrackEventCommand) that execute asynchronous side-effects—user storage updates, in-app message refresh/clear, SDK state transitions, and non-blocking event logging—using CoroutineScope(Dispatchers.IO) and Notifly utilities.

## notifly/src/main/java/tech/notifly/http
- [Httpclientoptions](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/HttpClientOptions.kt): Internal immutable holder encapsulating HTTP client timeout configuration (httpTimeout, httpGetTimeout Ints), used by tech.notifly.
- [Httpresponse](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/HttpResponse.kt): HttpResponse wraps HTTP result with statusCode, payload and optional throwable, exposing isSuccess (true for 200/201/202/304) using java.net.
- [Ihttpclient](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/IHttpClient.kt): Defines the IHttpClient interface with suspend get/post methods (url, optional headers, JSONObject body for post) returning HttpResponse, relying on Kotlin coroutines and org.json.
- [Httpclientoptions](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/HttpClientOptions.kt): Internal immutable configuration holder for HTTP client timeout settings (httpTimeout, httpGetTimeout) used to configure request and GET timeouts across the SDK's HTTP layer.
- [Httpresponse](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/HttpResponse.kt): Represents an immutable HTTP response wrapper exposing statusCode, payload, throwable and an isSuccess computed property (uses java.net.
- [Ihttpclient](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/IHttpClient.kt): Defines the IHttpClient interface exposing coroutine suspend get/post methods (JSONObject body, optional headers) returning HttpResponse for performing HTTP requests; depends on org.json.

## notifly/src/main/java/tech/notifly/http/impl
- [Httpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/HttpConnectionFactory.kt): Internal HttpConnectionFactory implements IHttpConnectionFactory, creating HttpURLConnection instances via URL(url).openConnection() (casts to HttpURLConnection), propagating IOExceptions and depending on java.
- [Ihttpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/IHttpConnectionFactory.kt): Internal interface declaring newHttpURLConnection(url: String): HttpURLConnection to create/configure HttpURLConnection instances (throws IOException) for injectable HTTP connection creation/testing; uses java.net/java.
- [Httpclient](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/HttpClient.kt): Concrete IHttpClient implementing suspend get/post using a connection factory, coroutine IO (GlobalScope), Android TrafficStats tag, JSON body streaming, custom headers (X-Notifly-SDK-*), timeouts, and HttpResponse.
- [Httpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/HttpConnectionFactory.kt): Internal HttpConnectionFactory implements IHttpConnectionFactory; newHttpURLConnection(url) creates and returns a java.net.
- [Ihttpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/IHttpConnectionFactory.kt): Internal factory interface that creates/configures java.net.
- [Httpclient](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/HttpClient.kt): Internal HttpClient implements IHttpClient providing suspend get/post using IHttpConnectionFactory and HttpClientOptions, performing HttpURLConnection I/O on Dispatchers.IO with timeouts, header/body handling, SDK headers, TrafficStats tagging, and HttpResponse results.

## notifly/src/main/java/tech/notifly/inapp
- [Notiflyinappmessageactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/NotiflyInAppMessageActivity.kt): Activity that displays an in-app HTML message in NotiflyWebView: parses intent extras (URL, modal_properties, campaign IDs), initializes webview, manages background/touch interception, dispatches in_app_message_show TrackEvent and updates re-eligibility hide-until.
- [Inappmessagescheduler](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageScheduler.kt): InAppMessageScheduler exposes schedule(context,campaign): optionally sleeps in a Thread for campaign.delay, aborts if NotiflyInAppMessageActivity.
- [Inappmessageutils](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageUtils.kt): Provides utilities for in-app modals: getViewDimensions(JSONObject,screenW,screenH) (width/height/vw/vh/min/max), getScreenWidthAndHeight(Activity,density) (API‑R insets aware), and getKSTCalendarDateString(daysOffset).
- [Inappmessagemanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageManager.kt): Singleton managing in‑app campaigns: syncs user/campaign state via NotiflySyncStateUtil, updates NotiflySdkStateManager, ingests events, evaluates/schedules campaigns, and exposes initialize, refresh, maybeScheduleInAppMessagesAndIngestEvent, updateUserProperties, addEventListener.
- [Notiflyinappmessageactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/NotiflyInAppMessageActivity.kt): NotiflyInAppMessageActivity: single-instance Activity that parses in-app intent (URL, modal_properties, campaign data), initializes NotiflyWebView, shows modal on load, sets background/touch interception, dispatches tracking and hide-until via CommandDispatcher/InAppMessageManager.
- [Inappmessagescheduler](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageScheduler.kt): Schedules and displays in-app campaigns by delaying on a background Thread, respecting NotiflyInAppMessageActivity.isActive, then launching the activity with a generated messageId and campaign extras (uses Campaign, Logger).
- [Inappmessageutils](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageUtils.kt): InAppMessageUtils is a Kotlin singleton exposing getViewDimensions(JSONObject?, screenW, screenH) to compute modal width/height (vw/vh, min/max), getScreenWidthAndHeight(Activity,density) using WindowMetrics fallback, and getKSTCalendarDateString(daysOffset).
- [Inappmessagemanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageManager.kt): InAppMessageManager singleton: syncs/fetches campaigns and user state (uses NotiflySyncStateUtil/Storage), evaluates and schedules in‑app campaigns on events, ingests event counts, manages user/hide properties, and exposes initialize, refresh, maybeRevalidateCampaigns, maybeScheduleInAppMessagesAndIngestEvent, addEventListener.

## notifly/src/main/java/tech/notifly/inapp/models
- [Campaign](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/Campaign.kt): Defines Campaign and related data models (Message, SegmentInfo, Condition, TriggeringConditions/filters, ReEligibleCondition), JSON parsers (Campaign.fromJSONObject and companions), validation logic and event-name matching using org.
- [Enums](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/Enums.kt): Defines enums for in-app segmentation/triggers—condition/operator/value types (SegmentConditionUnitType, GroupOperator, ConditionOperator, Operator, TriggeringConditionType/Operator, ValueType, EventBasedConditionType, ReEligibleConditionUnitType)—used for evaluation and serialization.
- [User](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/User.kt): Defines EventIntermediateCounts, EventLogData and UserData models with suspending JSON parsing (fromJSONObject), merging, device/app metadata resolution via NotiflyDeviceUtil/SDK wrappers, storage lookups, and utilities (get, getSkeleton).
- [Campaign](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/Campaign.kt): Parses and models in-app campaign JSON into typed Kotlin data classes (Campaign, Message, SegmentInfo, Condition, TriggeringConditions/Filters), validates fields, exposes Campaign.fromJSONObject and TriggeringConditions.
- [Enums](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/Enums.kt): Defines enums for in-app segmentation, rule evaluation, triggering and re-eligibility (operators, value types, condition/unit types, event-based counts); used by targeting, parsing and evaluation logic; side-effect free.
- [User](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/User.kt): Defines EventIntermediateCounts, EventLogData, and UserData models with JSON parsers, merge/equals helpers, UserData.get and suspend fromJSONObject/getSkeleton factories; depends on NotiflyDeviceUtil, NotiflyStorage, SDK info providers and logs via Logger.

## notifly/src/main/java/tech/notifly/inapp/views
- [Notiflywebview](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/views/NotiflyWebView.kt): NotiflyWebView extends WebView to render in-app HTML, inject javascriptToInject, handle modal sizing and rounded clipping, expose initialize(..
- [Touchinterceptorlayout](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/views/TouchInterceptorLayout.kt): Custom ConstraintLayout that overrides onInterceptTouchEvent to detect taps outside any child WebView, invoke the public onTouchOutsideWebView callback, and consume the event (returns true).
- [Notiflywebview](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/views/NotiflyWebView.kt): NotiflyWebView extends WebView to render in-app HTML modals, injects JS, exposes initialize(..
- [Touchinterceptorlayout](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/views/TouchInterceptorLayout.kt): ConstraintLayout subclass that overrides onInterceptTouchEvent to detect touches outside any child WebView, invoking onTouchOutsideWebView callback and intercepting the event (uses view bounds check).

## notifly/src/main/java/tech/notifly/push
- [Fcmbroadcastreceiver](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/FCMBroadcastReceiver.kt): BroadcastReceiver that asynchronously handles FCM messages targeted to Notifly, validates payload, loads images, builds/shows notifications (channels/POST_NOTIFICATIONS), logs delivery, and launches NotificationOpenedActivity.
- [Notificationauthorizationstatus](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/NotificationAuthorizationStatus.kt): Defines NotificationAuthorizationStatus enum with integer-backed values (DENIED=0, AUTHORIZED=1) representing push notification permission state for serialization/interoperability with platform permission APIs.
- [Pushnotificationmanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/PushNotificationManager.kt): Singleton that manages notification click dispatch and interceptor post-builds: buffers unopened IPushNotification until INotificationClickListener subscribes, fires events on main thread, registers interceptors, and invokes postBuild/postBuildAsync on NotificationCompat.Builder.
- [Fcmbroadcastreceiver](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/FCMBroadcastReceiver.kt): FCMBroadcastReceiver (onReceive) filters FCM intents, parses PushNotification, asynchronously downloads images via coroutines, checks POST_NOTIFICATIONS, creates channels, builds/shows NotificationCompat with PendingIntent to NotificationOpenedActivity, and logs delivery.
- [Notificationauthorizationstatus](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/NotificationAuthorizationStatus.kt): Defines the NotificationAuthorizationStatus enum (DENIED=0, AUTHORIZED=1) representing push permission state with integer 'value' for serialization/interoperability across SDK APIs.
- [Pushnotificationmanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/PushNotificationManager.kt): Central singleton that queues unhandled IPushNotification clicks, dispatches NotificationClickEvent to INotificationClickListener on main thread, manages INotificationInterceptor list, and invokes postBuild/postBuildAsync on NotificationCompat.Builder.

## notifly/src/main/java/tech/notifly/push/activities
- [Notificationopenedactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/activities/NotificationOpenedActivity.kt): Activity that handles notification opens (onCreate/onNewIntent), deserializes IPushNotification (Tiramisu-aware), initializes Notifly, logs "push_click", triggers PushNotificationManager callbacks, updates IApplicationService.entryState, and opens the URL or app.
- [Notificationopenedactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/activities/NotificationOpenedActivity.kt): Activity that, after Notifly.initializeWithContext, handles notification-click intents (onCreate/onNewIntent), deserializes IPushNotification, logs push_click, triggers PushNotificationManager.

## notifly/src/main/java/tech/notifly/push/impl
- [Pushnotification](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/impl/PushNotification.kt): Parses FCM intent extras into a PushNotification (data class) via PushNotification.fromIntentExtras(Bundle), mapping notifly JSON keys to fields, generating androidNotificationId, extracting customData, TTL/sentTime fallbacks, and rawPayload.
- [Notificationclickevent](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/impl/NotificationClickEvent.kt): Immutable event class implementing INotificationClickEvent that encapsulates an IPushNotification (constructor param) for dispatching notification click events to SDK event handlers.
- [Pushnotification](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/impl/PushNotification.kt): PushNotification.kt defines PushNotification (IPushNotification) data model and fromIntentExtras(Bundle) parser that extracts internal 'notifly' JSON, builds fields (androidNotificationId via SecureRandom), customData, rawPayload, TTL/sentTime fallbacks.
- [Notificationclickevent](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/impl/NotificationClickEvent.kt): NotificationClickEvent is a simple implementation of INotificationClickEvent that wraps an IPushNotification instance, used by the SDK to represent and dispatch user notification click events.

## notifly/src/main/java/tech/notifly/push/interfaces
- [Inotificationclickevent](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationClickEvent.kt): Defines INotificationClickEvent, a simple event interface exposing an IPushNotification via its notification property, used as the payload for notification click handlers and callbacks.
- [Inotificationinterceptor](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationInterceptor.kt): Defines INotificationInterceptor interface with synchronous postBuild and suspend postBuildAsync hooks (NotificationCompat.Builder, IPushNotification) to mutate/replace builders before posting; defaults to no-op.
- [Ipushnotification](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/IPushNotification.kt): Serializable IPushNotification interface modeling push messages with display fields (title/body/image/url), metadata (campaign/notifly IDs, sentTime, ttl, androidNotificationId), customData, rawPayload; depends on Importance.
- [Iinappmessageeventlistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/IInAppMessageEventListener.kt): Interface contract invoked by the SDK when a user triggers an in‑app message action; implement handleEvent(eventName: String, eventParams: Map<String, Any?>?
- [Inotificationclicklistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationClickListener.kt): Defines INotificationClickListener: a single-method callback (onClick(INotificationClickEvent)) apps implement to handle SDK-invoked user notification click events.
- [Inotificationclickevent](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationClickEvent.kt): Defines INotificationClickEvent: a simple event contract exposing a single val notification: IPushNotification used as the payload for notification-click handlers/callbacks.
- [Inotificationinterceptor](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationInterceptor.kt): Interface for intercepting and mutating NotificationCompat.Builder after push notification creation via synchronous postBuild and suspend postBuildAsync hooks (default no-op), depends on IPushNotification.
- [Ipushnotification](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/IPushNotification.kt): Serializable IPushNotification interface declaring push payload fields (title, body, campaignId, androidNotificationId, notiflyMessageId, importance, disableBadge, url, imageUrl, sentTime, ttl, customData, rawPayload) consumed by push handlers.
- [Iinappmessageeventlistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/IInAppMessageEventListener.kt): Listener interface apps implement to receive in-app message events via handleEvent(eventName: String, eventParams: Map<String, Any?>?
- [Inotificationclicklistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationClickListener.kt): Interface INotificationClickListener declares onClick(INotificationClickEvent) for app code to handle SDK-invoked notification click events and inspect payload/context provided by INotificationClickEvent.

## notifly/src/main/java/tech/notifly/sdk
- [Notiflysdkcontroltoken](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkControlToken.kt): Marker interface NotiflySdkControlToken (no methods) serves as an opaque control token created only by Notifly React Native/Flutter bridges to gate privileged SDK APIs/operations.
- [Notiflysdkstate](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkState.kt): Defines the NotiflySdkState enum representing SDK lifecycle states (NOT_INITIALIZED, READY, REFRESHING, FAILED) used by SDK components and observers to track initialization/refresh/failure flows.
- [Notiflysdkprefs](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkPrefs.kt): Provides NotiflySdkPrefs.inAppMessage exposing InAppMessagePrefs APIs to set/get campaign revalidation interval (ms) on InAppMessageManager and to store intent flags for opening in‑app links.
- [Notiflysdkstatemanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkStateManager.kt): Singleton NotiflySdkStateManager holds a volatile NotiflySdkState, provides getState/setState (ignores redundant updates), manages ISdkLifecycleListener subscriptions and fires onStateChanged(prev,new) via EventProducer.
- [Notiflysdkinfo](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkInfo.kt): Provides SDK metadata: NotiflySdkInfo exposes getSdkVersion() (from BuildConfig.VERSION) and getSdkType() ("native"), used for telemetry/headers; depends on tech.
- [Notiflysdkwrapperinfo](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkWrapperInfo.kt): Singleton storing mutable wrapper metadata (sdkVersion: String?, sdkType: NotiflySdkWrapperType?
- [Isdklifecyclelistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/ISdkLifecycleListener.kt): Callback interface for receiving SDK lifecycle transitions—defines onStateChanged(prevState: NotiflySdkState, newState: NotiflySdkState) invoked whenever the Notifly SDK changes state, allowing consumers to react.
- [Notiflysdkwrappertype](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkWrapperType.kt): Defines NotiflySdkWrapperType enum (REACT_NATIVE, FLUTTER) used to identify SDK wrapper platform and provides toLowerCaseName() for lowercase string representation during configuration/initialization.
- [Notiflysdkcontroltoken](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkControlToken.kt): Marker interface NotiflySdkControlToken (no methods) used as an SDK control token to restrict certain APIs to only be instantiated/called by Notifly React Native or Flutter SDK wrappers.
- [Notiflysdkstate](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkState.kt): Defines NotiflySdkState enum representing SDK lifecycle (NOT_INITIALIZED, READY, REFRESHING, FAILED) used to track initialization/refresh status and guard operations/state transitions across the SDK.
- [Notiflysdkprefs](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkPrefs.kt): Defines NotiflySdkPrefs singleton exposing InAppMessagePrefs which wraps APIs to get/set in-app campaign revalidation interval (delegates to InAppMessageManager) and store intent flags for link opening.
- [Notiflysdkstatemanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkStateManager.kt): Singleton managing Notifly SDK lifecycle state (volatile NotiflySdkState), skipping identical-state no-ops and notifying ISdkLifecycleListener via EventProducer; public APIs: getState, setState, add/removeSdkLifecycleListener.
- [Notiflysdkinfo](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkInfo.kt): Singleton object exposing SDK metadata: getSdkVersion() (initialized from tech.notifly.
- [Notiflysdkwrapperinfo](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkWrapperInfo.kt): Singleton Kotlin object storing nullable sdkVersion and sdkType (NotiflySdkWrapperType) with public getSdkVersion/getSdkType/setSdkVersion/setSdkType; mutates global (unsynchronized) state.
- [Isdklifecyclelistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/ISdkLifecycleListener.kt): Interface for SDK lifecycle callbacks: ISdkLifecycleListener exposes onStateChanged(prevState: NotiflySdkState, newState: NotiflySdkState) invoked whenever the Notifly SDK state transitions.
- [Notiflysdkwrappertype](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkWrapperType.kt): Enum NotiflySdkWrapperType enumerates supported SDK wrappers (REACT_NATIVE, FLUTTER) and exposes toLowerCaseName() for lowercase platform identifiers used in initialization/analytics routing.

## notifly/src/main/java/tech/notifly/services
- [Notiflyserviceprovider](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/services/NotiflyServiceProvider.kt): Singleton service-locator mapping Class→instance with register/unregister (unsynchronized) and synchronized getService(Class)/reified getService<T>(), enabling global type-casted service retrieval.
- [Notiflyserviceprovider](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/services/NotiflyServiceProvider.kt): Singleton object implementing a runtime service registry mapping Class<T>→instance, synchronized on the internal map; exposes register, unregister, getService(Class) and internal reified getService<T>().

## notifly/src/main/java/tech/notifly/storage
- [Notiflystorageitem](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/storage/NotiflyStorageItem.kt): Defines an internal sealed NotiflyStorageItem<T> typed key registry exposing storage key strings and default values (e.g.
- [Notiflystorage](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/storage/NotiflyStorage.kt): Manages app key-value persistence via cached SharedPreferences (EncryptedSharedPreferences on API>=23 with fallback), exposing generic put/get/clear/clearAll for primitive/String NotiflyStorageItem values and logging errors.
- [Notiflystorageitem](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/storage/NotiflyStorageItem.kt): Defines typed storage keys and defaults for SDK persistent values (project/user IDs, credentials, tokens, in-app message data) as an internal generic sealed NotiflyStorageItem with key and default.
- [Notiflystorage](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/storage/NotiflyStorage.kt): Internal singleton managing encrypted (AES256) or fallback plain SharedPreferences (cached) using EncryptedSharedPreferences on API≥M, with logged fallback, exposing generic put/get/clear/clearAll for NotiflyStorageItem<T>.

## notifly/src/main/java/tech/notifly/utils
- [Osutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/OSUtil.kt): Utility object providing OS helpers: isAppInForeground (ActivityManager), hasConfigChangeFlag (PackageManager.getActivityInfo, SDK-conditional), openURLInBrowserIntent (normalizes scheme, builds browser Intent with default FLAG_ACTIVITY_NEW_TASK), isInAppLink, and SchemaType.
- [Notiflyidutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyIdUtil.kt): Internal NotiflyIdUtil generates deterministic hyphen-free UUIDv5 identifiers from predefined Namespace UUIDs and a name using SHA-1 (MessageDigest, ByteBuffer), exposing generate(namespace, name): String.
- [Notiflytimerutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyTimerUtil.kt): Exports getTimestampMicros, getTimestampMillis, and getTimestampSeconds; getTimestampMicros returns epochMillis*1000 plus a volatile per-millisecond sequence to ensure uniqueness and logs overflow via Logger.v.
- [Notiflyfirebaseutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyFirebaseUtil.kt): Internal singleton providing suspend getFcmToken(): String? by awaiting FirebaseMessaging.
- [Notiflynotificationchannelutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyNotificationChannelUtil.kt): Internal utility using NotificationManager that creates Android O+ notification channels (high/normal/low with/without badges), maps Notifly Importance to NotificationCompat priority, and exposes createNotificationChannels, getSystemPriority, getNotificationChannelId.
- [Notiflyauthutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyAuthUtil.kt): Provides suspend APIs to fetch Cognito ID token via HTTP POST (Dispatchers.IO), derive Notifly userId from storage/FCM, and refresh+persist COGNITO_ID_TOKEN; uses IHttpClient, NotiflyStorage, NotiflyIdUtil.
- [N](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/N.kt): Internal constants container for Notifly SDK defining PLATFORM='android', reserved user/event keys (external_user_id, previous_notifly_user_id, previous_external_user_id), internal event prefix 'notifly__', and special user property keys ($timezone, $phone_number, $email).
- [Notiflylogutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyLogUtil.kt): Provides logEvent/logEventNonBlocking to build/sanitize event payloads, schedule in-app messages, and POST with retries to LOG_EVENT_URI via IHttpClient, using NotiflyServiceProvider, storage, auth, device, and firebase utils.
- [Notiflydeviceutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyDeviceUtil.kt): Internal object providing suspend IO-bound device/app identifiers (getOsVersion, getAppVersion, getExternalDeviceId) using Dispatchers.IO, device properties (getPlatform, getApiLevel, getBrand, getModel), and Samsung-specific shouldForceSoftwareRendering check.
- [Notiflyutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyUtil.kt): Provides pure utility functions for project ID validation (32-hex regex), timezone checks against java.util.
- [Notiflysyncstateutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflySyncStateUtil.kt): Suspending utility that performs authenticated HTTP GET to fetch and parse user/campaign/event sync state (fetchState, fetchCampaigns), handling 401 retries/invalidation and using NotiflyStorage, AuthUtil, IHttpClient, coroutines.
- [Notiflyuserutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyUserUtil.kt): Utility object exposing suspend APIs (setUserProperties, removeUserId, sessionStart) and mergeEventCounts: updates EXTERNAL_USER_ID storage, updates InAppMessageManager, checks notif permissions, and logs events.
- [Eventproducer](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/EventProducer.kt): Generic EventProducer<T> manages a thread-safe subscribers list (Collections.synchronizedList), copies it for firing to avoid concurrent-modification, and exposes subscribe/unsubscribe/subscribeAll, fire/fireOnMain, suspendingFire/suspendingFireOnMain (uses Dispatchers.
- [Logger](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/Logger.kt): Singleton Logger wrapping android.util.
- [Notiflythreadutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyThreadUtil.kt): Provides suspendifyBlocking, suspendifyOnMain, and suspendifyOnThread overloads to run suspend blocks via runBlocking on current, Dispatchers.Main (from a new thread), or named/prioritized kotlin.
- [Osutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/OSUtil.kt): Utility for Android OS interactions: checks foreground status (isAppInForeground), inspects Activity configChange flags (hasConfigChangeFlag), and builds browser Intents (openURLInBrowserIntent, isInAppLink) using ActivityManager and PackageManager.
- [Notiflyidutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyIdUtil.kt): Generates dashless UUIDv5 IDs from predefined Namespace UUIDs using SHA-1 (MessageDigest) and ByteBuffer; public API: NotiflyIdUtil.generate(namespace: Namespace, name: String): String.
- [Notiflytimerutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyTimerUtil.kt): Singleton utility providing getTimestampMicros/getTimestampMillis/getTimestampSeconds: combines System.currentTimeMillis with a per-millisecond volatile sequence counter to produce unique microsecond timestamps, mutates state and logs overflows via Logger.
- [Notiflyfirebaseutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyFirebaseUtil.kt): Internal suspend helper NotiflyFirebaseUtil.getFcmToken() obtains the FirebaseMessaging token via FirebaseMessaging.
- [Notiflynotificationchannelutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyNotificationChannelUtil.kt): Internal utility defining Notifly channel IDs and APIs—createNotificationChannels(context) (API O) registers high/normal/low channels with/without badges via NotificationManager, plus getSystemPriority and getNotificationChannelId.
- [Notiflyauthutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyAuthUtil.kt): Internal NotiflyAuthUtil exposes suspend APIs (getCognitoIdToken, getNotiflyUserId, invalidateCognitoIdToken) to fetch/refresh Cognito tokens, compute Notifly user IDs, performing network calls (IHttpClient), storage reads/writes, and IO dispatcher.
- [N](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/N.kt): Internal object N holding SDK-wide static keys and values: PLATFORM="android", reserved user keys (external_user_id, previous_*), internal event prefix "notifly__", special property keys ($timezone,$phone_number,$email).
- [Notiflylogutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyLogUtil.kt): Provides logEvent/logEventNonBlocking to build sanitized JSON event payloads (IDs, device/app/sdk), schedule in-app messages, and POST via NotiflyServiceProvider IHttpClient with auth and 3 retries.
- [Notiflydeviceutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyDeviceUtil.kt): Internal utility exposing suspend IO-wrapped accessors (getOsVersion, getAppVersion, getExternalDeviceId) plus device properties (getApiLevel/Brand/Model, getPlatform) and shouldForceSoftwareRendering detection for Samsung S25 models, using Android Build, Settings.Secure, Context.
- [Notiflyutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyUtil.kt): NotiflyUtil offers stateless helpers: isValidProjectId(validates 32‑hex IDs via regex ^[0-9a-fA-F]{32}$), isValidTimezoneId(uses java.util.
- [Notiflysyncstateutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflySyncStateUtil.kt): Provides suspend fetchState/fetchCampaigns that use IHttpClient to GET /user-state, construct project/user/device IDs, parse campaigns/events/user data, and invalidate Cognito token (3 retries on 401).
- [Notiflyuserutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyUserUtil.kt): Provides suspend helpers to set/remove user IDs, start sessions, and merge EventIntermediateCounts — persisting externalUserId to NotiflyStorage, updating InAppMessageManager, logging events, and checking notification auth via NotificationManagerCompat.
- [Eventproducer](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/EventProducer.kt): EventProducer<T> manages a thread-safe subscriber list (subscribe/unsubscribe/subscribeAll, hasSubscribers) and dispatches callbacks via fire/fireOnMain/suspendingFire/suspendingFireOnMain (uses Collections.synchronizedList, kotlinx.
- [Logger](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/Logger.kt): Singleton Logger wraps android.util.
- [Notiflythreadutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyThreadUtil.kt): Provides helper APIs—suspendifyBlocking, suspendifyOnMain, and two suspendifyOnThread overloads—that run suspending blocks via runBlocking (optionally on new threads or Dispatchers.Main), spawn threads, and log exceptions (Logger).

## notifly/src/test/java/tech/notifly/command
- [Commanddispatchertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/command/CommandDispatcherTest.kt): Unit test using runTest coroutines verifying CommandDispatcher.dispatch(SetUserIdCommand) transitions NotiflySdkState to REFRESHING before calling NotiflyUserUtil.
- [Commanddispatchertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/command/CommandDispatcherTest.kt): Unit test verifying CommandDispatcher.dispatch(SetUserIdCommand) transitions NotiflySdkState to REFRESHING before invoking NotiflyUserUtil.

## notifly/src/test/java/tech/notifly/command/models
- [Commandstest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/command/models/CommandsTest.kt): Unit tests for SetUserIdCommand.execute() validating that successful NotiflyUserUtil.
- [Commandstest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/command/models/CommandsTest.kt): Unit tests for SetUserIdCommand.execute(), mocking SharedPreferences, NotiflyUserUtil and NotiflySdkStateManager to assert it sets NotiflySdkState.

## notifly/src/test/java/tech/notifly/http/impl
- [Mockhttpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/http/impl/MockHttpConnectionFactory.kt): Internal test IHttpConnectionFactory implementation that creates MockHttpURLConnection instances with configurable MockResponse (status, body, errorBody, headers, artificial delay), exposing newHttpURLConnection, lastConnection and connections.
- [Httpclienttest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/http/impl/HttpClientTest.kt): Unit tests for HttpClient using MockHttpConnectionFactory verify GET timeout yields statusCode 0 with TimeoutCancellationException and POST returns 400 with error payload, using HttpClientOptions and runBlocking.
- [Mockhttpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/http/impl/MockHttpConnectionFactory.kt): Test IHttpConnectionFactory producing MockHttpURLConnection instances (newHttpURLConnection) with configurable MockResponse (status, response/error bodies, headers, mockRequestTime sleep); exposes connections list and lastConnection.
- [Httpclienttest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/http/impl/HttpClientTest.kt): Unit tests for HttpClient using MockHttpConnectionFactory that verify get/post flows: timeout produces TimeoutCancellationException, error 400 returns payload, uses HttpClientOptions and runBlocking.

## notifly/src/test/java/tech/notifly/inapp
- [Inappmessagemanagertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/inapp/InAppMessageManagerTest.kt): Unit test for InAppMessageManager.initialize that mocks Context, NotiflyStorage, IHttpClient, NotiflySyncStateUtil and InAppMessageScheduler, using Robolectric and MockK, verifying setState(REFRESHING) then setState(READY) and scheduling.
- [Inappmessageutilstest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/inapp/InAppMessageUtilsTest.kt): Unit tests for InAppMessageUtils validating getViewDimensions (absolute/vw/vh/min/max bounds), getScreenWidthAndHeight (SDK M/R WindowMetrics/display), and getKSTCalendarDateString using Robolectric and mockk.
- [Inappmessagemanagertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/inapp/InAppMessageManagerTest.kt): Unit test for InAppMessageManager.initialize verifying NotiflySdkStateManager transitions (REFRESHING→READY) and scheduling behavior, using mocked Context, NotiflyStorage, IHttpClient, NotiflySyncStateUtil, and InAppMessageScheduler.
- [Inappmessageutilstest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/inapp/InAppMessageUtilsTest.kt): Unit tests for InAppMessageUtils covering getViewDimensions (modal props, vw/vh conversions, min/max constraints), getScreenWidthAndHeight (SDK M/R window metrics/display handling) and getKSTCalendarDateString timezone-aware date offsets, using Robolectric and MockK.

## notifly/src/test/java/tech/notifly/services
- [Notiflyserviceprovidertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/services/NotiflyServiceProviderTest.kt): Unit tests for NotiflyServiceProvider verifying register/getService/unregister behavior via a TestService/TestServiceImpl, asserting correct retrieval and null after unregistration using JUnit @Before/@Test.
- [Notiflyserviceprovidertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/services/NotiflyServiceProviderTest.kt): Tests NotiflyServiceProvider's register, getService, and unregister APIs, verifying registry modifications and retrieval behavior with a TestServiceImpl; resets registry in @Before using JUnit.

## notifly/src/test/java/tech/notifly/utils
- [Notiflyutiltest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/utils/NotiflyUtilTest.kt): Unit test for NotiflyUtil.isValidProjectId validating 32‑char hex project ID acceptance and rejection of non-hex/whitespace-padded inputs using JUnit assertTrue/assertFalse.
- [Notiflyutiltest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/utils/NotiflyUtilTest.kt): Unit test for NotiflyUtil.isValidProjectId verifying acceptance of a 32-char hex project ID and rejection of non-hex or whitespace-padded strings, using JUnit assertions.

## sample/src/main/java/tech/notifly/sample
- [Webviewactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/WebViewActivity.kt): Compose-based ComponentActivity hosting a remembered WebView (MyWebView composable) with onWebViewCreated callback, lifecycle management (pause/resume/destroy), Notifly SDK calls (trackEvent/setUserProperties), and navigation.
- [Samplefirebasemessagingservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleFirebaseMessagingService.kt): Sample FirebaseMessagingService subclass handling FCM events by overriding onMessageReceived(RemoteMessage) — calls super, logs message.data — and onNewToken(String), logging refreshed token (uses com.
- [Sampleactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleActivity.kt): SampleActivity is a Jetpack Compose demo exposing Notifly flows: requests POST_NOTIFICATIONS permission, reflects into internal utils for tokens, and calls Notifly APIs (setUserId/phone/email/timezone/userProperties, trackEvent, sync).
- [Sampleapplication](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleApplication.kt): Initializes Notifly SDK in Application.onCreate: sets logging and in-app preferences, calls Notifly.
- [Playgroundactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/PlaygroundActivity.kt): PlaygroundActivity (deeplink notiflyandroidtestapp://playground) is a ComponentActivity that sets a Jetpack Compose Material3 UI, checks notification permission via NotificationManagerCompat.areNotificationsEnabled(), and starts SampleActivity.
- [Webviewactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/WebViewActivity.kt): Sample WebViewActivity demonstrates a Jetpack Compose-hosted AndroidView WebView with lifecycle-safe management (pause/resume/destroy), a MyWebView composable, Notifly.trackEvent/setUserProperties calls, and navigation.
- [Samplefirebasemessagingservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleFirebaseMessagingService.kt): Sample FirebaseMessagingService that logs incoming RemoteMessage data and refreshed FCM tokens, overrides onMessageReceived (calls super) and onNewToken; depends on Firebase Messaging and Android Log.
- [Sampleactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleActivity.kt): SampleActivity is a Jetpack Compose demo that exercises Notifly SDK (Notifly.setUserId/setPhoneNumber/setEmail/setTimezone/setUserProperties/trackEvent/getNotiflyUserId), requests notification permission, fetches Cognito/FCM tokens via reflection, and triggers sync.
- [Sampleapplication](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleApplication.kt): Initializes and configures Notifly SDK at app startup: sets logging/in-app prefs, calls Notifly.initialize with credentials, registers click listener, notification interceptor (color async image fetch), and in‑app event listener.
- [Playgroundactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/PlaygroundActivity.kt): PlaygroundActivity is a sample Compose Activity (deeplink notiflyandroidtestapp://playground) that displays notification-permission status via NotificationManagerCompat.areNotificationsEnabled(), uses NotiflyAndroidSDKTheme, and launches SampleActivity.

## sample/src/main/java/tech/notifly/sample/ui/theme
- [Color](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Color.kt): Defines Compose Color constants (Purple80, PurpleGrey80, Pink80, Purple40, PurpleGrey40, Pink40) used by the sample app theme; depends on androidx.compose.
- [Theme](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Theme.kt): NotiflyAndroidSDKTheme composable selects dynamic (Android 12+) or fixed Material3 color schemes (dark/light), applies statusBarColor and appearance via WindowCompat SideEffect (requires Activity), and wraps content with Typography.
- [Type](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Type.kt): Defines a sample Jetpack Compose Material3 Typography instance (val Typography) customizing bodyLarge TextStyle (FontFamily.Default, FontWeight.
- [Color](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Color.kt): Defines six Jetpack Compose Color constants (Purple80/PurpleGrey80/Pink80, Purple40/PurpleGrey40/Pink40) for the sample app theme; depends on androidx.compose.
- [Theme](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Theme.kt): Provides NotiflyAndroidSDKTheme composable that selects Material3 color schemes (dynamic on Android 12+ or predefined dark/light), and sets status bar color/appearance via SideEffect and WindowCompat.
- [Type](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Type.kt): Defines the sample app's Material3 Typography val overriding bodyLarge TextStyle (FontFamily.Default, FontWeight.
