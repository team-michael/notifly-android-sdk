<!-- repo: team-michael/notifly-android-sdk -->
<!-- ref: main -->
<!-- commit: 7a91757140d3ec99cb4e260733c9b0f36cce4987 -->
<!-- generated_at: 2025-11-17T08:51:18Z -->
# Platform: Android

## /
- [Build.gradle](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/build.gradle.kts): Top-level Gradle Kotlin build configuration that defines common repositories, the Google Services classpath, and configures but does not apply core Android, Kotlin, Firebase Crashlytics, ktlint, and detekt plugins for all subprojects in the SDK.
- [Settings.gradle](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/settings.gradle.kts): Configures plugin and dependency repositories, defines the `NotiflyAndroidSDK` root project, includes the `:notifly` module, and conditionally includes the `:sample` app module when not running in a JitPack build environment.
- [Gradle](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/gradle.properties): Defines project-wide Gradle and Android build settings (JVM args, AndroidX usage, Kotlin style, non-transitive R, BuildConfig generation) and the SDK’s semantic version (`version=1.18.
- [Readme](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/README.md): High-level README describing the Notifly Android SDK’s purpose, JitPack integration setup, local dev workflow (sample app, unit tests, lint), and deployment process (versioning, GitHub releases, JitPack build triggering) rather than providing runtime APIs.
- [Changelog](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/CHANGELOG.md): CHANGELOG.md documents all notable Notifly Android SDK releases (features, fixes, breaking changes) following Keep a Changelog and Semantic Versioning, serving as the primary reference for version-specific behavior and upgrade/migration considerations.

## notifly
- [Build.gradle](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/build.gradle.kts): Gradle Kotlin DSL configuration for the `notifly` Android library module, defining Android/Kotlin build settings, Firebase and AndroidX dependencies, test setup, Detekt/Ktlint static analysis, and Maven publishing of the `release` artifact (`com.github.

## notifly/src/main/java/tech/notifly
- [Notifly](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/Notifly.kt): Defines the primary public `Notifly` singleton entry point, handling SDK initialization (service registration, HTTP client, lifecycle), user/session management (`setUserId`, properties, phone/email/timezone), event tracking, in-app messaging and push listeners/interceptors, logging, and internal SDK wrapper metadata.

## notifly/src/main/java/tech/notifly/application
- [Iapplicationlifecyclehandler](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/IApplicationLifecycleHandler.kt): Defines the `IApplicationLifecycleHandler` interface and a no-op `BaseApplicationLifecycleHandler` implementation for reacting to app foreground (`onFocus(first: Boolean)`) and background (`onUnfocused()`) transitions used by other SDK components to track application lifecycle state.
- [Iapplicationservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/IApplicationService.kt): Defines `IApplicationService`, exposing app-wide context, current foreground `Activity`, foreground state, mutable `ApplicationEntryAction` entry state, and lifecycle handler registration (`addApplicationLifecycleHandler`/`removeApplicationLifecycleHandler`) used to observe and react to application lifecycle transitions.
- [Applicationservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/ApplicationService.kt): Tracks global application lifecycle and foreground state by registering `ActivityLifecycleCallbacks` and `ComponentCallbacks`, managing the current `Activity`, orientation changes, and `ApplicationEntryAction`, and broadcasting focus/unfocus events via `EventProducer` to `IApplicationLifecycleHandler` subscribers.
- [Applicationentryaction](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/application/ApplicationEntryAction.kt): Defines `ApplicationEntryAction`, an enum modeling app entry sources (notification click, icon open, background resume) with convenience boolean properties (`isNotificationClick`, `isAppOpen`, `isAppClose`) used to branch behavior based on how the application was launched.

## notifly/src/main/java/tech/notifly/command
- [Commanddispatcher](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/CommandDispatcher.kt): Centralized dispatcher and `ISdkLifecycleListener` that queues and conditionally executes `CommandBase` instances based on `NotiflySdkState`, manages state transitions on `SET_USER_ID`, and flushes a priority-backed pending command queue when the SDK becomes `READY`.

## notifly/src/main/java/tech/notifly/command/models
- [Payloads](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/models/Payloads.kt): Defines the `PayloadBase` interface and concrete payload models (`SetUserIdPayload`, `SetUserPropertiesPayload`, `TrackEventPayload`) encapsulating `Context` and typed data for user identification, user property updates, and event tracking commands within the Notifly SDK.
- [Commands](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/command/models/Commands.kt): Defines the command types and concrete command implementations (`SetUserIdCommand`, `SetUserPropertiesCommand`, `TrackEventCommand`) that encapsulate user identity, property, and event tracking operations, executing them asynchronously via coroutines and coordinating with storage, user, in-app messaging, and SDK state managers.

## notifly/src/main/java/tech/notifly/http
- [Httpclientoptions](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/HttpClientOptions.kt): Defines internal `HttpClientOptions`, encapsulating configurable HTTP timeouts (for general and GET requests) used by the SDK’s HTTP client to control request duration behavior.
- [Httpresponse](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/HttpResponse.kt): Represents the result of an HTTP call with statusCode, optional response payload, and optional error, and exposes `isSuccess` to classify successful responses (200, 201, 202, 304) based on `HttpURLConnection` status codes.
- [Ihttpclient](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/IHttpClient.kt): Defines the `IHttpClient` coroutine-based abstraction for performing JSON `POST` and `GET` HTTP requests, returning `HttpResponse` objects while allowing optional headers, to be implemented by concrete networking layers used across the SDK.

## notifly/src/main/java/tech/notifly/http/impl
- [Httpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/HttpConnectionFactory.kt): Provides the `HttpConnectionFactory` implementation of `IHttpConnectionFactory`, constructing and returning a `java.net.
- [Ihttpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/IHttpConnectionFactory.kt): Defines the internal `IHttpConnectionFactory` abstraction for creating `HttpURLConnection` instances from a URL string, enabling injectable/replaceable HTTP connection creation and facilitating testing or alternate transport implementations within the HTTP layer.
- [Httpclient](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/http/impl/HttpClient.kt): Implements `IHttpClient` using `HttpURLConnection` and coroutines to perform timed GET/POST requests (JSON payloads, custom headers including Notifly SDK metadata), handle network/offline errors, and return structured `HttpResponse` objects, relying on `IHttpConnectionFactory` and `Logger`.

## notifly/src/main/java/tech/notifly/inapp
- [Notiflyinappmessageactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/NotiflyInAppMessageActivity.kt): Fullscreen `Activity` that hosts `NotiflyWebView` for rendering in-app message HTML, parses intent extras (URL, modal properties, re-eligibility), configures background/touch interception, tracks "in_app_message_show" via `CommandDispatcher`, updates `InAppMessageManager`, and enforces a single active instance.
- [Inappmessagescheduler](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageScheduler.kt): Defines `InAppMessageScheduler`, which schedules and displays in-app message campaigns by optionally delaying execution, checking `NotiflyInAppMessageActivity` state, and launching it via `Intent` with campaign, URL, modal, re-eligibility, and generated message ID extras.
- [Inappmessageutils](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageUtils.kt): Utility singleton providing screen size calculation (DP with WindowInsets support), modal view dimension resolution from JSON props (including vw/vh, min/max constraints), and a simple date string helper (`yyyy-MM-dd`) for in-app messaging layouts.
- [Inappmessagemanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/InAppMessageManager.kt): Central manager singleton for the in-app messaging feature that initializes/syncs user state and campaigns, tracks per-event counts, evaluates segmentation/trigger filters and visibility rules, schedules eligible campaigns (`maybeScheduleInAppMessagesAndIngestEvent`), manages hide-until/user properties, and dispatches in-app events to `IInAppMessageEventListener`s.

## notifly/src/main/java/tech/notifly/inapp/models
- [Campaign](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/Campaign.kt): Defines the `Campaign` model and related segmentation/triggering structures, including JSON parsing (`fromJSONObject`), campaign comparison by delay/updatedAt, segment and condition evaluation, event-name based triggering (`TriggeringConditions.match`), and event-parameter filters, using org.
- [Enums](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/Enums.kt): Defines all core enums used by the in-app segmentation and triggering engine (segment condition unit types, logical/group operators, comparison/trigger operators, value and event-based condition types, and re-eligibility intervals), shared across condition evaluation and campaign targeting logic.
- [User](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/models/User.kt): Defines core in-app analytics and user models, including `EventIntermediateCounts` (JSON parsing/merging of intermediate event counts), `EventLogData`, and `UserData` (device/sdk metadata, user properties, segmentation access via `get`, JSON deserialization, and merge logic using NotiflyDeviceUtil/Storage).

## notifly/src/main/java/tech/notifly/inapp/views
- [Notiflywebview](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/views/NotiflyWebView.kt): Custom `WebView` used to render in-app message HTML, inject a JS bridge (`Android.postMessage`) for button click handling, log and dispatch in-app events/user properties via `CommandDispatcher`/`InAppMessageManager`, open deep links, and apply position, size, and corner radii using `ConstraintLayout`.
- [Touchinterceptorlayout](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/inapp/views/TouchInterceptorLayout.kt): TouchInterceptorLayout is a custom ConstraintLayout that intercepts touch events, detects clicks occurring outside any child WebView bounds, and invokes an optional onTouchOutsideWebView callback before delegating to the standard view hierarchy handling.

## notifly/src/main/java/tech/notifly/push
- [Fcmbroadcastreceiver](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/FCMBroadcastReceiver.kt): Handles incoming FCM `RECEIVE` broadcasts, parses Notifly `PushNotification` payloads, downloads optional images, builds and displays configured `NotificationCompat` notifications (with channels and click `PendingIntent` to `NotificationOpenedActivity`), logs delivery metrics, and manages ordered-broadcast result codes.
- [Notificationauthorizationstatus](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/NotificationAuthorizationStatus.kt): Defines the `NotificationAuthorizationStatus` enum representing push notification permission state (DENIED or AUTHORIZED) with associated integer values for use in authorization checks, persistence, and interop with platform or backend APIs.
- [Pushnotificationmanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/PushNotificationManager.kt): Manages push notification click handling and post-build interception, queuing unprocessed `IPushNotification`s until `INotificationClickListener`s subscribe, firing `NotificationClickEvent`s via `EventProducer`, and sequentially invoking synchronous/asynchronous `INotificationInterceptor.postBuild` hooks on `NotificationCompat.

## notifly/src/main/java/tech/notifly/push/activities
- [Notificationopenedactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/activities/NotificationOpenedActivity.kt): Handles push-notification click intents by deserializing `IPushNotification`, logging a `push_click` event, invoking `PushNotificationManager.notificationOpened`, updating `IApplicationService.

## notifly/src/main/java/tech/notifly/push/impl
- [Pushnotification](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/impl/PushNotification.kt): Defines the `PushNotification` data model and `Importance` enum, plus `fromIntentExtras(Bundle)` factory to parse FCM/Notifly payloads into strongly-typed notification objects (including TTL, sent time, customData, rawPayload), filtering reserved keys and logging JSON/bundle parsing issues.
- [Notificationclickevent](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/impl/NotificationClickEvent.kt): Defines `NotificationClickEvent`, a simple `INotificationClickEvent` implementation that encapsulates an `IPushNotification` instance to represent a notification click event passed through the Notifly push handling pipeline.

## notifly/src/main/java/tech/notifly/push/interfaces
- [Inotificationclickevent](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationClickEvent.kt): Defines the `INotificationClickEvent` interface representing a notification click event payload, exposing the associated `IPushNotification` instance for click handlers, listeners, or analytics flows.
- [Inotificationinterceptor](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationInterceptor.kt): Defines the `INotificationInterceptor` interface for synchronously or asynchronously mutating a `NotificationCompat.Builder` after construction based on an `IPushNotification`, enabling pluggable notification customization hooks in the Notifly push pipeline.
- [Ipushnotification](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/IPushNotification.kt): Defines the `IPushNotification` serializable interface describing a received push’s core metadata (title/body, IDs, importance, badge flag, URLs, timing/TTL, customData, rawPayload) used by Notifly’s push handling pipeline and downstream display/analytics components.
- [Iinappmessageeventlistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/IInAppMessageEventListener.kt): Defines the `IInAppMessageEventListener` interface, exposing a single `handleEvent(eventName, eventParams)` callback for SDK consumers to receive and process user-triggered events originating from in-app messages.
- [Inotificationclicklistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/push/interfaces/INotificationClickListener.kt): Defines the `INotificationClickListener` interface, exposing the `onClick(INotificationClickEvent)` callback used by the SDK to notify clients when a user taps a delivered push notification.

## notifly/src/main/java/tech/notifly/sdk
- [Notiflysdkcontroltoken](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkControlToken.kt): Marker interface used as a capability token that only platform-specific (React Native / Flutter) Notifly SDKs can instantiate, enabling restricted access/usage paths without exposing any public methods or properties.
- [Notiflysdkstate](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkState.kt): Defines the `NotiflySdkState` enum representing the SDK’s lifecycle states (`NOT_INITIALIZED`, `READY`, `REFRESHING`, `FAILED`) for use in internal state management, control flow, and status reporting across the Notifly Android SDK.
- [Notiflysdkprefs](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkPrefs.kt): Provides `NotiflySdkPrefs.inAppMessage` configuration, exposing `InAppMessagePrefs` APIs to set/get in-app campaign revalidation interval via `InAppMessageManager` and manage optional intent flags for in-app link opening behavior.
- [Notiflysdkstatemanager](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkStateManager.kt): Centralized singleton managing the current `NotiflySdkState`, exposing thread-safe getters/setters that broadcast state transitions via `EventProducer<ISdkLifecycleListener>` and providing registration/removal APIs (`addSdkLifecycleListener`, `removeSdkLifecycleListener`) for SDK lifecycle observers.
- [Notiflysdkinfo](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkInfo.kt): Provides the `NotiflySdkInfo` singleton exposing the SDK’s build-time version (`BuildConfig.VERSION`) via `getSdkVersion()` and a hardcoded SDK type identifier (`"native"`) via `getSdkType()` for runtime metadata and diagnostics.
- [Notiflysdkwrapperinfo](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkWrapperInfo.kt): Holds mutable global metadata about the wrapping SDK (version and `NotiflySdkWrapperType`), exposing simple getters/setters (`getSdkVersion`, `setSdkVersion`, `getSdkType`, `setSdkType`) used by other components to identify the integrating wrapper layer.
- [Isdklifecyclelistener](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/ISdkLifecycleListener.kt): Defines the `ISdkLifecycleListener` callback interface for observing `NotiflySdkState` transitions, exposing a single `onStateChanged(prevState, newState)` method invoked by the core SDK whenever its lifecycle state changes.
- [Notiflysdkwrappertype](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/sdk/NotiflySdkWrapperType.kt): Defines `NotiflySdkWrapperType`, an enum of supported bridge environments (React Native, Flutter) with a helper `toLowerCaseName()` for generating lowercase identifier strings used in wrapper-specific integration or configuration flows.

## notifly/src/main/java/tech/notifly/services
- [Notiflyserviceprovider](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/services/NotiflyServiceProvider.kt): Provides a simple global service locator for registering, unregistering, and retrieving singleton service instances by `Class` or reified type, backed by a synchronized `MutableMap<Class<*>, Any>` for internal dependency resolution across the SDK.

## notifly/src/main/java/tech/notifly/storage
- [Notiflystorageitem](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/storage/NotiflyStorageItem.kt): Defines the internal `NotiflyStorageItem` sealed class enumerating typed storage keys (IDs, credentials, in-app message metadata) with associated defaults, used as a type-safe contract for accessing persisted values (e.g.
- [Notiflystorage](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/storage/NotiflyStorage.kt): Provides a singleton, lazily-initialized key–value storage backed by encrypted (when available) or plain SharedPreferences, exposing generic `put`, `get`, `clear`, and `clearAll` operations keyed by `NotiflyStorageItem<T>` with automatic type handling and fallback logging.

## notifly/src/main/java/tech/notifly/utils
- [Osutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/OSUtil.kt): Provides OS-level utilities for the SDK, including checking if the app process is in the foreground, detecting activity configChange flags across API levels, constructing browser `Intent`s for various URI schemes (HTTP/HTTPS/data), and identifying in-app links via `SchemaType`.
- [Notiflyidutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyIdUtil.kt): Generates deterministic, dashless UUID v5 identifiers using SHA‑1 and fixed namespaces (event, registered/unregistered user, device), exposing `generate(namespace, name)` while encapsulating raw UUID creation and bit‑level version/variant configuration.
- [Notiflytimerutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyTimerUtil.kt): Utility singleton providing monotonically increasing microsecond timestamps (with millisecond-based sequence counter and overflow logging via `Logger`), plus convenience methods for current time in milliseconds and seconds (`getTimestampMicros`, `getTimestampMillis`, `getTimestampSeconds`).
- [Notiflyfirebaseutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyFirebaseUtil.kt): Provides a coroutine-based utility to asynchronously fetch the Firebase Cloud Messaging registration token (`getFcmToken()`), handling exceptions by logging via `Logger` and returning `null` on failure, using `FirebaseMessaging` and `kotlinx.coroutines.
- [Notiflynotificationchannelutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyNotificationChannelUtil.kt): Utility for configuring Notifly’s Android notification channels: defines badge/non-badge channel IDs per `Importance`, creates `NotificationChannel`s via `NotificationManager` (`createNotificationChannels`), and exposes mapping helpers `getSystemPriority` and `getNotificationChannelId` for use in notification builders.
- [Notiflyauthutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyAuthUtil.kt): Provides coroutine-based utilities for Notifly authentication, including HTTP retrieval of Cognito ID tokens via `IHttpClient`, deterministic Notifly user ID generation based on stored project/external/Firebase IDs, and invalidation/refresh of stored Cognito tokens using `NotiflyStorage`.
- [N](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/N.kt): Defines `tech.notifly.
- [Notiflylogutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyLogUtil.kt): Provides `NotiflyLogUtil` utilities to asynchronously or suspendingly log events to the Notifly backend, sanitize and JSON-encode event payloads, enrich them with device/user/SDK metadata, trigger in-app message scheduling, and perform authenticated HTTP posting with retry handling.
- [Notiflydeviceutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyDeviceUtil.kt): Provides coroutine-based helpers for retrieving OS/app/device identifiers (OS version, app version, ANDROID_ID, platform, API level, brand, model) and a device-model/manufacturer check (`shouldForceSoftwareRendering`) used to enable software rendering on problematic Samsung S25-series devices.
- [Notiflyutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyUtil.kt): Utility singleton providing project ID validation against a 32-char hex regex, timezone ID validation against `TimeZone.getAvailableIDs()`, and retrieval of the device’s current timezone ID for use across the Notifly SDK.
- [Notiflysyncstateutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflySyncStateUtil.kt): Utility object that synchronously fetches and parses remote user state (campaigns, event intermediate counts, and user data) via IHttpClient with Cognito-authenticated GET requests, 401 retry/invalidation logic, and JSON deserialization into Campaign, EventIntermediateCounts, and UserData models.
- [Notiflyuserutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyUserUtil.kt): Utility singleton providing user/session operations for the SDK, including setting/removing external user IDs (with storage and in-app property syncing), logging `session_start` with device/notification metadata, computing notification authorization status, and merging `EventIntermediateCounts` collections.
- [Eventproducer](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/EventProducer.kt): Thread-safe generic event bus managing subscriber handlers (`subscribe`, `unsubscribe`, `subscribeAll`) and providing synchronous, coroutine-based, and main-thread dispatch (`fire`, `fireOnMain`, `suspendingFire`, `suspendingFireOnMain`) using `Dispatchers.Main` and an external `suspendifyOnMain` helper.
- [Logger](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/Logger.kt): Centralized logging utility wrapping `android.util.
- [Notiflythreadutil](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/main/java/tech/notifly/utils/NotiflyThreadUtil.kt): Provides utility functions to execute suspend lambdas in blocking, main-thread, or background-thread contexts using `runBlocking`, `Dispatchers.Main`, and `kotlin.

## notifly/src/test/java/tech/notifly/command
- [Commanddispatchertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/command/CommandDispatcherTest.kt): Unit test validating that `CommandDispatcher.dispatch(SetUserIdCommand)` transitions `NotiflySdkState` to `REFRESHING` before invoking `NotiflyUserUtil.

## notifly/src/test/java/tech/notifly/command/models
- [Commandstest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/command/models/CommandsTest.kt): Unit tests for `SetUserIdCommand` that mock `Context`, `SharedPreferences`, `NotiflyUserUtil`, and `NotiflySdkStateManager` to verify `execute()` transitions the SDK state to `READY` or `FAILED` based on the outcome of setting user properties.

## notifly/src/test/java/tech/notifly/http/impl
- [Mockhttpconnectionfactory](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/http/impl/MockHttpConnectionFactory.kt): Provides a test-only `IHttpConnectionFactory` implementation that returns configurable `MockHttpURLConnection` instances, enabling assertion of created connections, simulated response codes, headers, response/error bodies, and artificial latency for HTTP client behavior tests.
- [Httpclienttest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/http/impl/HttpClientTest.kt): Unit tests verifying `HttpClient`’s behavior with mocked HTTP connections, focusing on coroutine timeout handling (producing `TimeoutCancellationException`) and error responses, using `MockHttpConnectionFactory`, `HttpClientOptions`, and JSON payloads for GET/POST calls.

## notifly/src/test/java/tech/notifly/inapp
- [Inappmessagemanagertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/inapp/InAppMessageManagerTest.kt): Verifies `InAppMessageManager.initialize` using Robolectric and MockK by stubbing storage, network (`IHttpClient`), services (`NotiflyServiceProvider`, `NotiflySdkStateManager`), campaigns parsing, and scheduling (`InAppMessageScheduler`), ensuring correct Notifly SDK state transition and campaign handling.
- [Inappmessageutilstest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/inapp/InAppMessageUtilsTest.kt): Unit tests for `InAppMessageUtils`, validating modal view dimension calculations from JSON props (including vw/vh, min/max constraints), screen size derivation across Android SDK levels (R, M), and KST-based calendar date string generation with positive/negative day offsets.

## notifly/src/test/java/tech/notifly/services
- [Notiflyserviceprovidertest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/services/NotiflyServiceProviderTest.kt): JUnit test suite validating `NotiflyServiceProvider`’s service registry behavior, including `register`, `getService`, and `unregister` flows using a `TestService` implementation to assert correct storage, retrieval, and cleanup semantics.

## notifly/src/test/java/tech/notifly/utils
- [Notiflyutiltest](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/notifly/src/test/java/tech/notifly/utils/NotiflyUtilTest.kt): Unit test verifying `NotiflyUtil.isValidProjectId` correctly validates project ID format, rejecting non-hex and whitespace-padded values using JUnit assertions.

## sample
- [Build.gradle](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/build.gradle.kts): Gradle Kotlin build script configuring the Notifly sample Android app module, including Android/Compose/Firebase setup, BuildConfig credentials injection from properties, release build/proguard settings, ktlint/detekt static analysis, and dependency wiring to the `:notifly` SDK project.

## sample/src/main/java/tech/notifly/sample
- [Webviewactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/WebViewActivity.kt): Sample Jetpack Compose-based activity that hosts a stateful Android WebView, manages its lifecycle (pause/resume/destroy), demonstrates navigation to `SampleActivity`, and showcases Notifly SDK usage via `Notifly.trackEvent` and `Notifly.
- [Samplefirebasemessagingservice](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleFirebaseMessagingService.kt): Sample `FirebaseMessagingService` implementation that logs incoming FCM data payloads and refreshed registration tokens via `onMessageReceived` and `onNewToken`, serving as a reference integration point for handling push notifications in the sample app.
- [Sampleactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleActivity.kt): SampleActivity is the main Jetpack Compose-based demo screen that handles notification permission, reflects into internal Notifly helper singletons, and showcases core SDK flows (authentication, ID/token retrieval, user identity/properties, event tracking, and navigation to other sample activities).
- [Sampleapplication](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/SampleApplication.kt): Initializes Notifly in the sample app, configures in-app message preferences, registers notification click and in-app event listeners, and installs a notification interceptor that customizes NotificationCompat builders (color, async large icon loading via imageUrl).
- [Playgroundactivity](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/PlaygroundActivity.kt): `PlaygroundActivity` is a sample deep-linked `ComponentActivity` that uses Jetpack Compose and `NotiflyAndroidSDKTheme` to display current notification permission status (via `NotificationManagerCompat.areNotificationsEnabled()`) and provides navigation into `SampleActivity` through a simple UI.

## sample/src/main/java/tech/notifly/sample/ui/theme
- [Color](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Color.kt): Defines the sample app’s Jetpack Compose color palette constants (Purple, PurpleGrey, Pink in light/dark variants) as `Color` values in the theme module for use across composable UI components.
- [Theme](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Theme.kt): Defines the `NotiflyAndroidSDKTheme` composable, configuring Material3 light/dark/dynamic color schemes, updating the hosting Activity’s status bar appearance via `WindowCompat`, and applying shared typography to wrap and theme sample app UI content.
- [Type](https://raw.githubusercontent.com/team-michael/notifly-android-sdk/main/sample/src/main/java/tech/notifly/sample/ui/theme/Type.kt): Defines the sample app’s Material3 `Typography` theme, customizing the `bodyLarge` `TextStyle` (font family, weight, size, line height, letter spacing) and serving as the central text-style configuration used by Compose UI components.
